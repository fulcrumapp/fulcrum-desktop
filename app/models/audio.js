"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _minidb = require("minidb");

var _fulcrumCore = require("fulcrum-core");

class Audio {
  static get tableName() {
    return 'audio';
  }

  static get columns() {
    return [{
      name: 'accountRowID',
      column: 'account_id',
      type: 'integer',
      null: false
    }, {
      name: 'id',
      column: 'resource_id',
      type: 'string',
      null: false
    }, {
      name: 'metadata',
      column: 'metadata',
      type: 'json'
    }, {
      name: 'filePath',
      column: 'file_path',
      type: 'string'
    }, {
      name: 'fileSize',
      column: 'file_size',
      type: 'integer'
    }, {
      name: 'contentType',
      column: 'content_type',
      type: 'string'
    }, {
      name: 'isDownloaded',
      column: 'is_downloaded',
      type: 'boolean',
      null: false
    }, {
      name: 'isUploaded',
      column: 'is_uploaded',
      type: 'boolean',
      null: false
    }, {
      name: 'isStored',
      column: 'is_stored',
      type: 'boolean',
      null: false
    }, {
      name: 'isProcessed',
      column: 'is_processed',
      type: 'boolean',
      null: false
    }, {
      name: 'formRowID',
      column: 'form_id',
      type: 'integer'
    }, {
      name: 'formID',
      column: 'form_resource_id',
      type: 'string'
    }, {
      name: 'recordRowID',
      column: 'record_id',
      type: 'integer'
    }, {
      name: 'recordID',
      column: 'record_resource_id',
      type: 'string'
    }, {
      name: 'updatedByRowID',
      column: 'updated_by_id',
      type: 'integer'
    }, {
      name: 'updatedByID',
      column: 'updated_by_resource_id',
      type: 'string'
    }, {
      name: 'createdByRowID',
      column: 'created_by_id',
      type: 'integer'
    }, {
      name: 'createdByID',
      column: 'created_by_resource_id',
      type: 'string'
    }, {
      name: 'hasTrack',
      column: 'has_track',
      type: 'boolean'
    }, {
      name: 'trackJSON',
      column: 'track',
      type: 'json'
    }, {
      name: 'duration',
      column: 'duration',
      type: 'double'
    }, {
      name: 'bitRate',
      column: 'bit_rate',
      type: 'double'
    }, {
      name: 'createdAt',
      column: 'server_created_at',
      type: 'datetime'
    }, {
      name: 'updatedAt',
      column: 'server_updated_at',
      type: 'datetime'
    }];
  }

  get id() {
    return this._id;
  }

  updateFromAPIAttributes(attributes) {
    this._id = attributes.access_key;
    this._metadata = attributes.metadata;
    this._fileSize = attributes.file_size;
    this._isUploaded = attributes.uploaded;
    this._isStored = attributes.stored;
    this._isProcessed = attributes.processed;
    this._contentType = attributes.content_type;
    this._hasTrack = !!attributes.track;
    this._trackJSON = attributes.track;
    this._createdByID = attributes.created_by_id;
    this._updatedByID = attributes.updated_by_id;
    this._createdAt = _fulcrumCore.DateUtils.parseISOTimestamp(attributes.created_at);
    this._updatedAt = _fulcrumCore.DateUtils.parseISOTimestamp(attributes.updated_at);
    this._formID = attributes.form_id;
    this._recordID = attributes.record_id;
    this._duration = null;
    this._bitRate = null;

    if (attributes.metadata && attributes.metadata.format) {
      if (attributes.metadata.format.duration != null) {
        this._duration = +attributes.metadata.format.duration;
      }

      if (attributes.metadata.format.bit_rate != null) {
        this._bitRate = +attributes.metadata.format.bit_rate;
      }
    }
  }

  get isDownloaded() {
    return this._isDownloaded;
  }

  set isDownloaded(value) {
    this._isDownloaded = !!value;
  }

  get createdAt() {
    return this._createdAt;
  }

  get updatedAt() {
    return this._updatedAt;
  }

}

exports.default = Audio;

_minidb.PersistentObject.register(Audio);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tb2RlbHMvYXVkaW8uanMiXSwibmFtZXMiOlsiQXVkaW8iLCJ0YWJsZU5hbWUiLCJjb2x1bW5zIiwibmFtZSIsImNvbHVtbiIsInR5cGUiLCJudWxsIiwiaWQiLCJfaWQiLCJ1cGRhdGVGcm9tQVBJQXR0cmlidXRlcyIsImF0dHJpYnV0ZXMiLCJhY2Nlc3Nfa2V5IiwiX21ldGFkYXRhIiwibWV0YWRhdGEiLCJfZmlsZVNpemUiLCJmaWxlX3NpemUiLCJfaXNVcGxvYWRlZCIsInVwbG9hZGVkIiwiX2lzU3RvcmVkIiwic3RvcmVkIiwiX2lzUHJvY2Vzc2VkIiwicHJvY2Vzc2VkIiwiX2NvbnRlbnRUeXBlIiwiY29udGVudF90eXBlIiwiX2hhc1RyYWNrIiwidHJhY2siLCJfdHJhY2tKU09OIiwiX2NyZWF0ZWRCeUlEIiwiY3JlYXRlZF9ieV9pZCIsIl91cGRhdGVkQnlJRCIsInVwZGF0ZWRfYnlfaWQiLCJfY3JlYXRlZEF0IiwiRGF0ZVV0aWxzIiwicGFyc2VJU09UaW1lc3RhbXAiLCJjcmVhdGVkX2F0IiwiX3VwZGF0ZWRBdCIsInVwZGF0ZWRfYXQiLCJfZm9ybUlEIiwiZm9ybV9pZCIsIl9yZWNvcmRJRCIsInJlY29yZF9pZCIsIl9kdXJhdGlvbiIsIl9iaXRSYXRlIiwiZm9ybWF0IiwiZHVyYXRpb24iLCJiaXRfcmF0ZSIsImlzRG93bmxvYWRlZCIsIl9pc0Rvd25sb2FkZWQiLCJ2YWx1ZSIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsIlBlcnNpc3RlbnRPYmplY3QiLCJyZWdpc3RlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUVlLE1BQU1BLEtBQU4sQ0FBWTtBQUNMLGFBQVRDLFNBQVMsR0FBRztBQUNyQixXQUFPLE9BQVA7QUFDRDs7QUFFaUIsYUFBUEMsT0FBTyxHQUFHO0FBQ25CLFdBQU8sQ0FDTDtBQUFFQyxNQUFBQSxJQUFJLEVBQUUsY0FBUjtBQUF3QkMsTUFBQUEsTUFBTSxFQUFFLFlBQWhDO0FBQThD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QkUsUUFBNUM7QUFDRDtBQUNGO0FBQ0Y7O0FBRWUsTUFBWkMsWUFBWSxHQUFHO0FBQ2pCLFdBQU8sS0FBS0MsYUFBWjtBQUNEOztBQUVlLE1BQVpELFlBQVksQ0FBQ0UsS0FBRCxFQUFRO0FBQ3RCLFNBQUtELGFBQUwsR0FBcUIsQ0FBQyxDQUFDQyxLQUF2QjtBQUNEOztBQUVZLE1BQVRDLFNBQVMsR0FBRztBQUNkLFdBQU8sS0FBS2xCLFVBQVo7QUFDRDs7QUFFWSxNQUFUbUIsU0FBUyxHQUFHO0FBQ2QsV0FBTyxLQUFLZixVQUFaO0FBQ0Q7O0FBbkZ3Qjs7OztBQXNGM0JnQix5QkFBaUJDLFFBQWpCLENBQTBCcEQsS0FBMUIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQZXJzaXN0ZW50T2JqZWN0IH0gZnJvbSAnbWluaWRiJztcbmltcG9ydCB7IERhdGVVdGlscyB9IGZyb20gJ2Z1bGNydW0tY29yZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEF1ZGlvIHtcbiAgc3RhdGljIGdldCB0YWJsZU5hbWUoKSB7XG4gICAgcmV0dXJuICdhdWRpbyc7XG4gIH1cblxuICBzdGF0aWMgZ2V0IGNvbHVtbnMoKSB7XG4gICAgcmV0dXJuIFtcbiAgICAgIHsgbmFtZTogJ2FjY291bnRSb3dJRCcsIGNvbHVtbjogJ2FjY291bnRfaWQnLCB0eXBlOiAnaW50ZWdlcicsIG51bGw6IGZhbHNlIH0sXG4gICAgICB7IG5hbWU6ICdpZCcsIGNvbHVtbjogJ3Jlc291cmNlX2lkJywgdHlwZTogJ3N0cmluZycsIG51bGw6IGZhbHNlIH0sXG4gICAgICB7IG5hbWU6ICdtZXRhZGF0YScsIGNvbHVtbjogJ21ldGFkYXRhJywgdHlwZTogJ2pzb24nIH0sXG4gICAgICB7IG5hbWU6ICdmaWxlUGF0aCcsIGNvbHVtbjogJ2ZpbGVfcGF0aCcsIHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICB7IG5hbWU6ICdmaWxlU2l6ZScsIGNvbHVtbjogJ2ZpbGVfc2l6ZScsIHR5cGU6ICdpbnRlZ2VyJyB9LFxuICAgICAgeyBuYW1lOiAnY29udGVudFR5cGUnLCBjb2x1bW46ICdjb250ZW50X3R5cGUnLCB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgeyBuYW1lOiAnaXNEb3dubG9hZGVkJywgY29sdW1uOiAnaXNfZG93bmxvYWRlZCcsIHR5cGU6ICdib29sZWFuJywgbnVsbDogZmFsc2UgfSxcbiAgICAgIHsgbmFtZTogJ2lzVXBsb2FkZWQnLCBjb2x1bW46ICdpc191cGxvYWRlZCcsIHR5cGU6ICdib29sZWFuJywgbnVsbDogZmFsc2UgfSxcbiAgICAgIHsgbmFtZTogJ2lzU3RvcmVkJywgY29sdW1uOiAnaXNfc3RvcmVkJywgdHlwZTogJ2Jvb2xlYW4nLCBudWxsOiBmYWxzZSB9LFxuICAgICAgeyBuYW1lOiAnaXNQcm9jZXNzZWQnLCBjb2x1bW46ICdpc19wcm9jZXNzZWQnLCB0eXBlOiAnYm9vbGVhbicsIG51bGw6IGZhbHNlIH0sXG4gICAgICB7IG5hbWU6ICdmb3JtUm93SUQnLCBjb2x1bW46ICdmb3JtX2lkJywgdHlwZTogJ2ludGVnZXInIH0sXG4gICAgICB7IG5hbWU6ICdmb3JtSUQnLCBjb2x1bW46ICdmb3JtX3Jlc291cmNlX2lkJywgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgIHsgbmFtZTogJ3JlY29yZFJvd0lEJywgY29sdW1uOiAncmVjb3JkX2lkJywgdHlwZTogJ2ludGVnZXInIH0sXG4gICAgICB7IG5hbWU6ICdyZWNvcmRJRCcsIGNvbHVtbjogJ3JlY29yZF9yZXNvdXJjZV9pZCcsIHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICB7IG5hbWU6ICd1cGRhdGVkQnlSb3dJRCcsIGNvbHVtbjogJ3VwZGF0ZWRfYnlfaWQnLCB0eXBlOiAnaW50ZWdlcicgfSxcbiAgICAgIHsgbmFtZTogJ3VwZGF0ZWRCeUlEJywgY29sdW1uOiAndXBkYXRlZF9ieV9yZXNvdXJjZV9pZCcsIHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICB7IG5hbWU6ICdjcmVhdGVkQnlSb3dJRCcsIGNvbHVtbjogJ2NyZWF0ZWRfYnlfaWQnLCB0eXBlOiAnaW50ZWdlcicgfSxcbiAgICAgIHsgbmFtZTogJ2NyZWF0ZWRCeUlEJywgY29sdW1uOiAnY3JlYXRlZF9ieV9yZXNvdXJjZV9pZCcsIHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICB7IG5hbWU6ICdoYXNUcmFjaycsIGNvbHVtbjogJ2hhc190cmFjaycsIHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgeyBuYW1lOiAndHJhY2tKU09OJywgY29sdW1uOiAndHJhY2snLCB0eXBlOiAnanNvbicgfSxcbiAgICAgIHsgbmFtZTogJ2R1cmF0aW9uJywgY29sdW1uOiAnZHVyYXRpb24nLCB0eXBlOiAnZG91YmxlJyB9LFxuICAgICAgeyBuYW1lOiAnYml0UmF0ZScsIGNvbHVtbjogJ2JpdF9yYXRlJywgdHlwZTogJ2RvdWJsZScgfSxcbiAgICAgIHsgbmFtZTogJ2NyZWF0ZWRBdCcsIGNvbHVtbjogJ3NlcnZlcl9jcmVhdGVkX2F0JywgdHlwZTogJ2RhdGV0aW1lJyB9LFxuICAgICAgeyBuYW1lOiAndXBkYXRlZEF0JywgY29sdW1uOiAnc2VydmVyX3VwZGF0ZWRfYXQnLCB0eXBlOiAnZGF0ZXRpbWUnIH1cbiAgICBdO1xuICB9XG5cbiAgZ2V0IGlkKCkge1xuICAgIHJldHVybiB0aGlzLl9pZDtcbiAgfVxuXG4gIHVwZGF0ZUZyb21BUElBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpIHtcbiAgICB0aGlzLl9pZCA9IGF0dHJpYnV0ZXMuYWNjZXNzX2tleTtcbiAgICB0aGlzLl9tZXRhZGF0YSA9IGF0dHJpYnV0ZXMubWV0YWRhdGE7XG4gICAgdGhpcy5fZmlsZVNpemUgPSBhdHRyaWJ1dGVzLmZpbGVfc2l6ZTtcbiAgICB0aGlzLl9pc1VwbG9hZGVkID0gYXR0cmlidXRlcy51cGxvYWRlZDtcbiAgICB0aGlzLl9pc1N0b3JlZCA9IGF0dHJpYnV0ZXMuc3RvcmVkO1xuICAgIHRoaXMuX2lzUHJvY2Vzc2VkID0gYXR0cmlidXRlcy5wcm9jZXNzZWQ7XG4gICAgdGhpcy5fY29udGVudFR5cGUgPSBhdHRyaWJ1dGVzLmNvbnRlbnRfdHlwZTtcbiAgICB0aGlzLl9oYXNUcmFjayA9ICEhYXR0cmlidXRlcy50cmFjaztcbiAgICB0aGlzLl90cmFja0pTT04gPSBhdHRyaWJ1dGVzLnRyYWNrO1xuICAgIHRoaXMuX2NyZWF0ZWRCeUlEID0gYXR0cmlidXRlcy5jcmVhdGVkX2J5X2lkO1xuICAgIHRoaXMuX3VwZGF0ZWRCeUlEID0gYXR0cmlidXRlcy51cGRhdGVkX2J5X2lkO1xuICAgIHRoaXMuX2NyZWF0ZWRBdCA9IERhdGVVdGlscy5wYXJzZUlTT1RpbWVzdGFtcChhdHRyaWJ1dGVzLmNyZWF0ZWRfYXQpO1xuICAgIHRoaXMuX3VwZGF0ZWRBdCA9IERhdGVVdGlscy5wYXJzZUlTT1RpbWVzdGFtcChhdHRyaWJ1dGVzLnVwZGF0ZWRfYXQpO1xuICAgIHRoaXMuX2Zvcm1JRCA9IGF0dHJpYnV0ZXMuZm9ybV9pZDtcbiAgICB0aGlzLl9yZWNvcmRJRCA9IGF0dHJpYnV0ZXMucmVjb3JkX2lkO1xuXG4gICAgdGhpcy5fZHVyYXRpb24gPSBudWxsO1xuICAgIHRoaXMuX2JpdFJhdGUgPSBudWxsO1xuXG4gICAgaWYgKGF0dHJpYnV0ZXMubWV0YWRhdGEgJiYgYXR0cmlidXRlcy5tZXRhZGF0YS5mb3JtYXQpIHtcbiAgICAgIGlmIChhdHRyaWJ1dGVzLm1ldGFkYXRhLmZvcm1hdC5kdXJhdGlvbiAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMuX2R1cmF0aW9uID0gK2F0dHJpYnV0ZXMubWV0YWRhdGEuZm9ybWF0LmR1cmF0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAoYXR0cmlidXRlcy5tZXRhZGF0YS5mb3JtYXQuYml0X3JhdGUgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLl9iaXRSYXRlID0gK2F0dHJpYnV0ZXMubWV0YWRhdGEuZm9ybWF0LmJpdF9yYXRlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGdldCBpc0Rvd25sb2FkZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzRG93bmxvYWRlZDtcbiAgfVxuXG4gIHNldCBpc0Rvd25sb2FkZWQodmFsdWUpIHtcbiAgICB0aGlzLl9pc0Rvd25sb2FkZWQgPSAhIXZhbHVlO1xuICB9XG5cbiAgZ2V0IGNyZWF0ZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fY3JlYXRlZEF0O1xuICB9XG5cbiAgZ2V0IHVwZGF0ZWRBdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXBkYXRlZEF0O1xuICB9XG59XG5cblBlcnNpc3RlbnRPYmplY3QucmVnaXN0ZXIoQXVkaW8pO1xuIl19
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _client = _interopRequireDefault(require("../../api/client"));

var _role = _interopRequireDefault(require("../../models/role"));

var _downloadResource = _interopRequireDefault(require("./download-resource"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class DownloadRoles extends _downloadResource.default {
  get resourceName() {
    return 'roles';
  }

  get typeName() {
    return 'role';
  }

  fetchObjects(lastSync, sequence) {
    return _client.default.getRoles(this.account);
  }

  fetchLocalObjects() {
    return this.account.findRoles();
  }

  findOrCreate(database, attributes) {
    return _role.default.findOrCreate(database, {
      resource_id: attributes.id,
      account_id: this.account.rowID
    });
  }

}

exports.default = DownloadRoles;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9zeW5jL3Rhc2tzL2Rvd25sb2FkLXJvbGVzLmpzIl0sIm5hbWVzIjpbIkRvd25sb2FkUm9sZXMiLCJEb3dubG9hZFJlc291cmNlIiwicmVzb3VyY2VOYW1lIiwidHlwZU5hbWUiLCJmZXRjaE9iamVjdHMiLCJsYXN0U3luYyIsInNlcXVlbmNlIiwiQ2xpZW50IiwiZ2V0Um9sZXMiLCJhY2NvdW50IiwiZmV0Y2hMb2NhbE9iamVjdHMiLCJmaW5kUm9sZXMiLCJmaW5kT3JDcmVhdGUiLCJkYXRhYmFzZSIsImF0dHJpYnV0ZXMiLCJSb2xlIiwicmVzb3VyY2VfaWQiLCJpZCIsImFjY291bnRfaWQiLCJyb3dJRCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRWUsTUFBTUEsYUFBTixTQUE0QkMseUJBQTVCLENBQTZDO0FBQzFDLE1BQVpDLFlBQVksR0FBRztBQUNqQixXQUFPLE9BQVA7QUFDRDs7QUFFVyxNQUFSQyxRQUFRLEdBQUc7QUFDYixXQUFPLE1BQVA7QUFDRDs7QUFFREMsRUFBQUEsWUFBWSxDQUFDQyxRQUFELEVBQVdDLFFBQVgsRUFBcUI7QUFDL0IsV0FBT0MsZ0JBQU9DLFFBQVAsQ0FBZ0IsS0FBS0MsT0FBckIsQ0FBUDtBQUNEOztBQUVEQyxFQUFBQSxpQkFBaUIsR0FBRztBQUNsQixXQUFPLEtBQUtELE9BQUwsQ0FBYUUsU0FBYixFQUFQO0FBQ0Q7O0FBRURDLEVBQUFBLFlBQVksQ0FBQ0MsUUFBRCxFQUFXQyxVQUFYLEVBQXVCO0FBQ2pDLFdBQU9DLGNBQUtILFlBQUwsQ0FBa0JDLFFBQWxCLEVBQTRCO0FBQUNHLE1BQUFBLFdBQVcsRUFBRUYsVUFBVSxDQUFDRyxFQUF6QjtBQUE2QkMsTUFBQUEsVUFBVSxFQUFFLEtBQUtULE9BQUwsQ0FBYVU7QUFBdEQsS0FBNUIsQ0FBUDtBQUNEOztBQW5CeUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQ2xpZW50IGZyb20gJy4uLy4uL2FwaS9jbGllbnQnO1xuaW1wb3J0IFJvbGUgZnJvbSAnLi4vLi4vbW9kZWxzL3JvbGUnO1xuaW1wb3J0IERvd25sb2FkUmVzb3VyY2UgZnJvbSAnLi9kb3dubG9hZC1yZXNvdXJjZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIERvd25sb2FkUm9sZXMgZXh0ZW5kcyBEb3dubG9hZFJlc291cmNlIHtcbiAgZ2V0IHJlc291cmNlTmFtZSgpIHtcbiAgICByZXR1cm4gJ3JvbGVzJztcbiAgfVxuXG4gIGdldCB0eXBlTmFtZSgpIHtcbiAgICByZXR1cm4gJ3JvbGUnO1xuICB9XG5cbiAgZmV0Y2hPYmplY3RzKGxhc3RTeW5jLCBzZXF1ZW5jZSkge1xuICAgIHJldHVybiBDbGllbnQuZ2V0Um9sZXModGhpcy5hY2NvdW50KTtcbiAgfVxuXG4gIGZldGNoTG9jYWxPYmplY3RzKCkge1xuICAgIHJldHVybiB0aGlzLmFjY291bnQuZmluZFJvbGVzKCk7XG4gIH1cblxuICBmaW5kT3JDcmVhdGUoZGF0YWJhc2UsIGF0dHJpYnV0ZXMpIHtcbiAgICByZXR1cm4gUm9sZS5maW5kT3JDcmVhdGUoZGF0YWJhc2UsIHtyZXNvdXJjZV9pZDogYXR0cmlidXRlcy5pZCwgYWNjb3VudF9pZDogdGhpcy5hY2NvdW50LnJvd0lEfSk7XG4gIH1cbn1cbiJdfQ==
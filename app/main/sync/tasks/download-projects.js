"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _client = _interopRequireDefault(require("../../api/client"));

var _project = _interopRequireDefault(require("../../models/project"));

var _downloadResource = _interopRequireDefault(require("./download-resource"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class DownloadProjects extends _downloadResource.default {
  get resourceName() {
    return 'projects';
  }

  get typeName() {
    return 'project';
  }

  fetchObjects(lastSync, sequence) {
    return _client.default.getProjects(this.account);
  }

  fetchLocalObjects() {
    return this.account.findProjects();
  }

  findOrCreate(database, attributes) {
    return _project.default.findOrCreate(database, {
      resource_id: attributes.id,
      account_id: this.account.rowID
    });
  }

}

exports.default = DownloadProjects;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9tYWluL3N5bmMvdGFza3MvZG93bmxvYWQtcHJvamVjdHMuanMiXSwibmFtZXMiOlsiRG93bmxvYWRQcm9qZWN0cyIsIkRvd25sb2FkUmVzb3VyY2UiLCJyZXNvdXJjZU5hbWUiLCJ0eXBlTmFtZSIsImZldGNoT2JqZWN0cyIsImxhc3RTeW5jIiwic2VxdWVuY2UiLCJDbGllbnQiLCJnZXRQcm9qZWN0cyIsImFjY291bnQiLCJmZXRjaExvY2FsT2JqZWN0cyIsImZpbmRQcm9qZWN0cyIsImZpbmRPckNyZWF0ZSIsImRhdGFiYXNlIiwiYXR0cmlidXRlcyIsIlByb2plY3QiLCJyZXNvdXJjZV9pZCIsImlkIiwiYWNjb3VudF9pZCIsInJvd0lEIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7QUFFZSxNQUFNQSxnQkFBTixTQUErQkMseUJBQS9CLENBQWdEO0FBQzdDLE1BQVpDLFlBQVksR0FBRztBQUNqQixXQUFPLFVBQVA7QUFDRDs7QUFFVyxNQUFSQyxRQUFRLEdBQUc7QUFDYixXQUFPLFNBQVA7QUFDRDs7QUFFREMsRUFBQUEsWUFBWSxDQUFDQyxRQUFELEVBQVdDLFFBQVgsRUFBcUI7QUFDL0IsV0FBT0MsZ0JBQU9DLFdBQVAsQ0FBbUIsS0FBS0MsT0FBeEIsQ0FBUDtBQUNEOztBQUVEQyxFQUFBQSxpQkFBaUIsR0FBRztBQUNsQixXQUFPLEtBQUtELE9BQUwsQ0FBYUUsWUFBYixFQUFQO0FBQ0Q7O0FBRURDLEVBQUFBLFlBQVksQ0FBQ0MsUUFBRCxFQUFXQyxVQUFYLEVBQXVCO0FBQ2pDLFdBQU9DLGlCQUFRSCxZQUFSLENBQXFCQyxRQUFyQixFQUErQjtBQUFDRyxNQUFBQSxXQUFXLEVBQUVGLFVBQVUsQ0FBQ0csRUFBekI7QUFBNkJDLE1BQUFBLFVBQVUsRUFBRSxLQUFLVCxPQUFMLENBQWFVO0FBQXRELEtBQS9CLENBQVA7QUFDRDs7QUFuQjREIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IENsaWVudCBmcm9tICcuLi8uLi9hcGkvY2xpZW50JztcbmltcG9ydCBQcm9qZWN0IGZyb20gJy4uLy4uL21vZGVscy9wcm9qZWN0JztcbmltcG9ydCBEb3dubG9hZFJlc291cmNlIGZyb20gJy4vZG93bmxvYWQtcmVzb3VyY2UnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEb3dubG9hZFByb2plY3RzIGV4dGVuZHMgRG93bmxvYWRSZXNvdXJjZSB7XG4gIGdldCByZXNvdXJjZU5hbWUoKSB7XG4gICAgcmV0dXJuICdwcm9qZWN0cyc7XG4gIH1cblxuICBnZXQgdHlwZU5hbWUoKSB7XG4gICAgcmV0dXJuICdwcm9qZWN0JztcbiAgfVxuXG4gIGZldGNoT2JqZWN0cyhsYXN0U3luYywgc2VxdWVuY2UpIHtcbiAgICByZXR1cm4gQ2xpZW50LmdldFByb2plY3RzKHRoaXMuYWNjb3VudCk7XG4gIH1cblxuICBmZXRjaExvY2FsT2JqZWN0cygpIHtcbiAgICByZXR1cm4gdGhpcy5hY2NvdW50LmZpbmRQcm9qZWN0cygpO1xuICB9XG5cbiAgZmluZE9yQ3JlYXRlKGRhdGFiYXNlLCBhdHRyaWJ1dGVzKSB7XG4gICAgcmV0dXJuIFByb2plY3QuZmluZE9yQ3JlYXRlKGRhdGFiYXNlLCB7cmVzb3VyY2VfaWQ6IGF0dHJpYnV0ZXMuaWQsIGFjY291bnRfaWQ6IHRoaXMuYWNjb3VudC5yb3dJRH0pO1xuICB9XG59XG4iXX0=